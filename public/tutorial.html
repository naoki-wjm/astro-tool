<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã¯ã˜ã‚ã¦ã®å æ˜Ÿè¡“ - å æ˜Ÿè¡“è¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 600px; margin: 2rem auto; padding: 0 1rem; line-height: 1.7; }
    h1 { font-size: 1.5rem; }
    .step { display: none; }
    .step.active { display: block; }
    .question { font-size: 1.1rem; font-weight: bold; margin-bottom: 1rem; }
    .options { display: flex; flex-direction: column; gap: 0.5rem; }
    .options label { 
      display: block; 
      padding: 1rem; 
      border: 2px solid #ddd; 
      border-radius: 8px; 
      cursor: pointer;
      transition: all 0.2s;
    }
    .options label:hover { border-color: #888; }
    .options input[type="radio"] { margin-right: 0.5rem; }
    .options input[type="radio"]:checked + span { font-weight: bold; }
    .options label:has(input:checked) { border-color: #333; background: #f9f9f9; }
    
    .form-section { margin-top: 1.5rem; }
    .form-section h3 { font-size: 1rem; margin-bottom: 0.75rem; color: #555; }
    .form-row { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; align-items: end; }
    .form-row > div { display: flex; flex-direction: column; gap: 0.25rem; }
    .form-row label { font-size: 0.85rem; color: #666; }
    .form-row input, .form-row select { padding: 0.5rem; font-size: 1rem; }
    .form-row input[type="number"] { width: 5rem; }
    .form-row select { min-width: 8rem; }
    
    .time-unknown { font-size: 0.9rem; color: #666; margin-top: 0.5rem; }
    .time-unknown label { cursor: pointer; }
    
    .nav-buttons { display: flex; gap: 1rem; margin-top: 2rem; }
    .nav-buttons button {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      cursor: pointer;
      border: none;
      border-radius: 6px;
    }
    .btn-back { background: #eee; }
    .btn-next { background: #333; color: white; }
    .btn-next:disabled { opacity: 0.5; cursor: not-allowed; }
    
    .result-section { margin-top: 2rem; }
    .result-section textarea { 
      width: 100%; 
      height: 300px; 
      font-family: monospace; 
      font-size: 0.85rem;
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: 6px;
    }
    .copy-instruction {
      background: #e8f4e8;
      border: 1px solid #4a4;
      border-radius: 6px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .copy-instruction p { margin: 0; }
    .btn-copy {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.75rem 2rem;
      background: #4a4;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
    }
    
    #status { color: #666; margin-bottom: 1rem; }
    .back-link { margin-bottom: 1.5rem; font-size: 0.9rem; }
    .back-link a { color: #666; }
    
    .person-section { 
      border: 1px solid #ddd; 
      border-radius: 8px; 
      padding: 1rem; 
      margin-bottom: 1rem;
    }
    .person-section h4 { margin: 0 0 1rem 0; font-size: 1rem; }
  </style>
</head>
<body>
  <div class="back-link"><a href="/">â† é€šå¸¸ç‰ˆã«æˆ»ã‚‹</a></div>
  
  <h1>ğŸ”® ã¯ã˜ã‚ã¦ã®å æ˜Ÿè¡“</h1>
  <p>è³ªå•ã«ç­”ãˆã¦ã„ãã¨ã€AIã«èããŸã‚ã®æ–‡ç« ãŒå®Œæˆã—ã¾ã™ã€‚</p>
  
  <div id="status">èª­ã¿è¾¼ã¿ä¸­...</div>
  
  <!-- Step 1: ä½•ã‚’çŸ¥ã‚ŠãŸã„ï¼Ÿ -->
  <div class="step active" id="step1">
    <p class="question">ä½•ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ</p>
    <div class="options">
      <label>
        <input type="radio" name="category" value="personality">
        <span>è‡ªåˆ†ã®æ€§æ ¼ãƒ»å¼·ã¿ãƒ»å‘ã„ã¦ã„ã‚‹ã“ã¨</span>
      </label>
      <label>
        <input type="radio" name="category" value="compatibility">
        <span>èª°ã‹ã¨ã®ç›¸æ€§</span>
      </label>
      <label>
        <input type="radio" name="category" value="yearly">
        <span>ä»Šå¹´ã®æµã‚Œ</span>
      </label>
      <label>
        <input type="radio" name="category" value="monthly">
        <span>ä»Šæœˆã®æµã‚Œ</span>
      </label>
      <label>
        <input type="radio" name="category" value="daily">
        <span>ç‰¹å®šã®æ—¥ã®é‹å‹¢</span>
      </label>
    </div>
    <div class="nav-buttons">
      <button class="btn-next" id="toStep2" disabled>æ¬¡ã¸ â†’</button>
    </div>
  </div>
  
  <!-- Step 2: è©³ç´°é¸æŠ -->
  <div class="step" id="step2">
    <p class="question" id="step2Question">è©³ã—ãæ•™ãˆã¦ãã ã•ã„</p>
    <div class="options" id="step2Options">
      <!-- JSã§å‹•çš„ã«ç”Ÿæˆ -->
    </div>
    <div class="nav-buttons">
      <button class="btn-back" id="backTo1">â† æˆ»ã‚‹</button>
      <button class="btn-next" id="toStep3" disabled>æ¬¡ã¸ â†’</button>
    </div>
  </div>
  
  <!-- Step 3: å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
  <div class="step" id="step3">
    <p class="question">æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
    
    <!-- è‡ªåˆ†ã®æƒ…å ±ï¼ˆç›¸æ€§ä»¥å¤–ï¼‰ -->
    <div id="selfForm" class="form-section">
      <h3>ã‚ãªãŸã®æƒ…å ±</h3>
      <div class="form-row">
        <div>
          <label>ç”Ÿã¾ã‚ŒãŸå¹´</label>
          <input type="number" id="birthYear" value="1990" min="1900" max="2100">
        </div>
        <div>
          <label>æœˆ</label>
          <input type="number" id="birthMonth" value="1" min="1" max="12">
        </div>
        <div>
          <label>æ—¥</label>
          <input type="number" id="birthDay" value="1" min="1" max="31">
        </div>
      </div>
      <div class="form-row">
        <div>
          <label>ç”Ÿã¾ã‚ŒãŸæ™‚åˆ»</label>
          <input type="number" id="birthHour" value="12" min="0" max="23">
        </div>
        <div>
          <label>åˆ†</label>
          <input type="number" id="birthMinute" value="0" min="0" max="59">
        </div>
      </div>
      <div class="time-unknown">
        <label><input type="checkbox" id="timeUnknown"> æ™‚åˆ»ãŒåˆ†ã‹ã‚‰ãªã„ï¼ˆ12æ™‚ã§è¨ˆç®—ã—ã¾ã™ï¼‰</label>
      </div>
      <div class="form-row">
        <div>
          <label>ç”Ÿã¾ã‚ŒãŸéƒ½é“åºœçœŒ</label>
          <select id="birthPref"></select>
        </div>
        <div>
          <label>å¸‚åŒºç”ºæ‘</label>
          <select id="birthCity"></select>
        </div>
      </div>
    </div>
    
    <!-- ç›¸æ€§ç”¨ï¼š2äººåˆ† -->
    <div id="compatibilityForm" class="form-section" style="display: none;">
      <div class="person-section">
        <h4>1äººç›®ï¼ˆã‚ãªãŸï¼‰</h4>
        <div class="form-row">
          <div>
            <label>ç”Ÿã¾ã‚ŒãŸå¹´</label>
            <input type="number" id="personAYear" value="1990" min="1900" max="2100">
          </div>
          <div>
            <label>æœˆ</label>
            <input type="number" id="personAMonth" value="1" min="1" max="12">
          </div>
          <div>
            <label>æ—¥</label>
            <input type="number" id="personADay" value="1" min="1" max="31">
          </div>
        </div>
        <div class="form-row">
          <div>
            <label>ç”Ÿã¾ã‚ŒãŸæ™‚åˆ»</label>
            <input type="number" id="personAHour" value="12" min="0" max="23">
          </div>
          <div>
            <label>åˆ†</label>
            <input type="number" id="personAMinute" value="0" min="0" max="59">
          </div>
        </div>
        <div class="time-unknown">
          <label><input type="checkbox" id="personATimeUnknown"> æ™‚åˆ»ãŒåˆ†ã‹ã‚‰ãªã„</label>
        </div>
        <div class="form-row">
          <div>
            <label>ç”Ÿã¾ã‚ŒãŸéƒ½é“åºœçœŒ</label>
            <select id="personAPref"></select>
          </div>
          <div>
            <label>å¸‚åŒºç”ºæ‘</label>
            <select id="personACity"></select>
          </div>
        </div>
      </div>
      
      <div class="person-section">
        <h4>2äººç›®ï¼ˆç›¸æ‰‹ï¼‰</h4>
        <div class="form-row">
          <div>
            <label>ç”Ÿã¾ã‚ŒãŸå¹´</label>
            <input type="number" id="personBYear" value="1990" min="1900" max="2100">
          </div>
          <div>
            <label>æœˆ</label>
            <input type="number" id="personBMonth" value="1" min="1" max="12">
          </div>
          <div>
            <label>æ—¥</label>
            <input type="number" id="personBDay" value="1" min="1" max="31">
          </div>
        </div>
        <div class="form-row">
          <div>
            <label>ç”Ÿã¾ã‚ŒãŸæ™‚åˆ»</label>
            <input type="number" id="personBHour" value="12" min="0" max="23">
          </div>
          <div>
            <label>åˆ†</label>
            <input type="number" id="personBMinute" value="0" min="0" max="59">
          </div>
        </div>
        <div class="time-unknown">
          <label><input type="checkbox" id="personBTimeUnknown"> æ™‚åˆ»ãŒåˆ†ã‹ã‚‰ãªã„</label>
        </div>
        <div class="form-row">
          <div>
            <label>ç”Ÿã¾ã‚ŒãŸéƒ½é“åºœçœŒ</label>
            <select id="personBPref"></select>
          </div>
          <div>
            <label>å¸‚åŒºç”ºæ‘</label>
            <select id="personBCity"></select>
          </div>
        </div>
      </div>
    </div>
    
    <!-- å¹´é¸æŠï¼ˆä»Šå¹´ã®æµã‚Œï¼‰ -->
    <div id="yearForm" class="form-section" style="display: none;">
      <h3>ä½•å¹´ã®é‹å‹¢ï¼Ÿ</h3>
      <div class="form-row">
        <div>
          <label>å¹´</label>
          <input type="number" id="targetYear" value="2025" min="1900" max="2100">
        </div>
      </div>
    </div>
    
    <!-- å¹´æœˆé¸æŠï¼ˆä»Šæœˆã®æµã‚Œï¼‰+ ç¾åœ¨åœ° -->
    <div id="monthForm" class="form-section" style="display: none;">
      <h3>ä½•å¹´ä½•æœˆã®é‹å‹¢ï¼Ÿ</h3>
      <div class="form-row">
        <div>
          <label>å¹´</label>
          <input type="number" id="targetMonthYear" value="2025" min="1900" max="2100">
        </div>
        <div>
          <label>æœˆ</label>
          <input type="number" id="targetMonth" value="1" min="1" max="12">
        </div>
      </div>
      <h3>ä»Šã„ã‚‹å ´æ‰€</h3>
      <div class="form-row">
        <div>
          <label>éƒ½é“åºœçœŒ</label>
          <select id="currentPref"></select>
        </div>
        <div>
          <label>å¸‚åŒºç”ºæ‘</label>
          <select id="currentCity"></select>
        </div>
      </div>
    </div>
    
    <!-- æ—¥ä»˜é¸æŠï¼ˆç‰¹å®šã®æ—¥ï¼‰ -->
    <div id="dayForm" class="form-section" style="display: none;">
      <h3>ä½•æ—¥ã®é‹å‹¢ï¼Ÿ</h3>
      <div class="form-row">
        <div>
          <label>å¹´</label>
          <input type="number" id="targetDayYear" value="2025" min="1900" max="2100">
        </div>
        <div>
          <label>æœˆ</label>
          <input type="number" id="targetDayMonth" value="1" min="1" max="12">
        </div>
        <div>
          <label>æ—¥</label>
          <input type="number" id="targetDayDay" value="1" min="1" max="31">
        </div>
      </div>
    </div>
    
    <div class="nav-buttons">
      <button class="btn-back" id="backTo2">â† æˆ»ã‚‹</button>
      <button class="btn-next" id="calculate">å ã† âœ¨</button>
    </div>
  </div>
  
  <!-- Step 4: çµæœ -->
  <div class="step" id="step4">
    <p class="question">å®Œæˆï¼</p>
    <div class="copy-instruction">
      <p>â†“ã“ã®æ–‡ç« ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€<strong>Claude</strong>ã‚„<strong>ChatGPT</strong>ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚</p>
    </div>
    <textarea id="resultText" readonly></textarea>
    <button class="btn-copy" id="copyResult">ğŸ“‹ ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
    
    <div class="nav-buttons">
      <button class="btn-back" id="backTo3">â† å…¥åŠ›ã«æˆ»ã‚‹</button>
      <button class="btn-back" id="restart">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
    </div>
  </div>
  
  <footer style="margin-top: 3rem; padding-top: 1rem; border-top: 1px solid #ccc; font-size: 0.85rem; color: #666;">
    <a href="/">é€šå¸¸ç‰ˆã‚’ä½¿ã†</a> ï¼ 
    <a href="/help.html">è©³ã—ã„ä½¿ã„æ–¹</a> ï¼
    <a href="https://github.com/naoki-wjm/astro-tool">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ (AGPL-3.0)</a>
  </footer>

  <script type="module" src="/src/tutorial.js"></script>
</body>
</html>